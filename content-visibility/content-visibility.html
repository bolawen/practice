<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>content-visibility</title>
    <style>
      li {
        width: 100%;
        height: 500px;
        content-visibility: auto;
      }
    </style>
  </head>
  <body>
    <ul></ul>
    <script>
      const startTime = Date.now();
      function createLi(fragment, index) {
        const li = document.createElement('li');
        li.innerHTML = `第 ${index + 1} 个元素`;
        fragment.appendChild(li);
      }

      const fragment = new DocumentFragment();
      for (let i = 0; i < 100000; i++) {
        createLi(fragment, i);
      }

      const ul = document.querySelector('ul');
      ul.appendChild(fragment);
      console.log('JS 运行时间为:', Date.now() - startTime); // JS 运行时间为: 395

      setTimeout(() => {
        console.log('JS 执行+页面渲染的时间为:', Date.now() - startTime);
      });
    </script>
  </body>
</html>
